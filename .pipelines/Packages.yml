parameters:
  - name: official
    type: boolean
  - name: rid
    type: string

steps:
- task: UseDotNet@2
  displayName: Setup .NET Core
  continueOnError: true
  inputs:
    packageType: 'sdk'
    useGlobalJson: true
    performMultiLevelLookup: true

- task: NodeTool@0 
  displayName: Setup Node.js
  inputs:
    versionSpec: 10.x

- script: npm ci
  displayName: npm ci
  workingDirectory: $(Build.SourcesDirectory)/src/Bicep.MSBuild.E2eTests

- script: npm run compile
  displayName: Compile
  workingDirectory: $(Build.SourcesDirectory)/src/Bicep.MSBuild.E2eTests
